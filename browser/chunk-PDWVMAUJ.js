import{a as U,b as R,e as $,g as A,h as B,i as G,j as J,m as Y}from"./chunk-F7CCY7NU.js";import{a as Q}from"./chunk-JBX3JDOW.js";import{a as H}from"./chunk-HTF4ZKH7.js";import{$ as _,C as D,I,J as v,K as b,M as F,N as E,O as M,P as h,Q as t,R as i,S as x,W as w,Y as u,_ as c,ba as r,ca as S,da as p,ja as N,k as y,ka as P,l as g,la as V,m as f,n as T,o as k,ra as j,s as m,sa as O,wa as L,y as o}from"./chunk-HJS4A3WU.js";import"./chunk-2NFLSA4Y.js";var K=()=>[10,20,30],X=(l,a)=>a.id;function Z(l,a){if(l&1){let e=w();t(0,"div",14)(1,"div")(2,"label",17),r(3,"User Experience"),i(),t(4,"div",31)(5,"span"),r(6),i()(),t(7,"input",32),u("ngModelChange",function(s){g(e);let d=c();return f(d.yearsOfExperience.set(s))}),i()(),t(8,"div")(9,"label",17),r(10,"Role / Primary Tech"),i(),t(11,"input",33),u("ngModelChange",function(s){g(e);let d=c();return f(d.primaryTechnology.set(s))}),i()(),t(12,"div")(13,"label",17),r(14,"Skills / Topics"),i(),t(15,"input",34),u("ngModelChange",function(s){g(e);let d=c();return f(d.secondarySkills.set(s))}),i()()()}if(l&2){let e=c();o(6),p("",e.yearsOfExperience()," Years"),o(),h("ngModel",e.yearsOfExperience()),o(4),h("ngModel",e.primaryTechnology()),o(4),h("ngModel",e.secondarySkills())}}function ee(l,a){if(l&1&&(t(0,"div",39),x(1,"i",40),r(2),i()),l&2){let e=c(2);o(2),p(" ",e.resumeFileName()," ")}}function te(l,a){if(l&1){let e=w();t(0,"div",15)(1,"label",35),x(2,"i",36),t(3,"span",37),r(4,"Upload PDF Resume"),i(),t(5,"input",38),u("change",function(s){g(e);let d=c();return f(d.onFileSelected(s))}),i()(),v(6,ee,3,1,"div",39),i()}if(l&2){let e=c();o(6),b(e.resumeFileName()?6:-1)}}function ie(l,a){if(l&1){let e=w();t(0,"button",41),u("click",function(){let s=g(e).$implicit,d=c();return f(d.interviewDuration.set(s))}),r(1),i()}if(l&2){let e=a.$implicit,n=c();_("bg-blue-600",n.interviewDuration()===e),o(),p(" ",e,"m ")}}function ne(l,a){if(l&1&&(t(0,"p",25),r(1),i()),l&2){let e=c();o(),S(e.error())}}function re(l,a){if(l&1&&(t(0,"div",42)(1,"div",43),T(),t(2,"svg",44),x(3,"circle",45)(4,"circle",46),i(),k(),t(5,"span",47),r(6),i()(),t(7,"div",48)(8,"div",49)(9,"h3",50),r(10),i(),t(11,"span",51),r(12),i(),t(13,"span",51),r(14),i()(),t(15,"p",52),r(16),i(),t(17,"p",53),r(18),P(19,"date"),i()()()),l&2){let e=a.$implicit;o(4),_("text-green-500",(e.overallScore||0)>=80)("text-yellow-500",(e.overallScore||0)>=50&&(e.overallScore||0)<80)("text-red-500",(e.overallScore||0)<50),I("stroke-dasharray",2*3.14*28)("stroke-dashoffset",2*3.14*28*(1-(e.overallScore||0)/100)),o(2),p(" ",e.overallScore||0," "),o(4),p("",e.config.primaryTechnology||"Technical Interview"," "),o(2),p("",e.config.interviewDuration,"m"),o(2),S(e.config.language),o(2),S(e.overallFeedback||"No feedback available."),o(2),S(V(19,14,e.date,"medium"))}}function oe(l,a){if(l&1&&(t(0,"div",29),E(1,re,20,17,"div",42,X),i()),l&2){let e=c();o(),M(e.history())}}function le(l,a){l&1&&(t(0,"div",30)(1,"div",54),x(2,"i",55),i(),t(3,"h3",56),r(4,"No Interviews Yet"),i(),t(5,"p",57),r(6,"Complete your first interview to see your detailed performance history and analytics here."),i()())}var W=class l{constructor(){this.stateService=y(Q);this.authService=y(H);this.router=y(L);this.setupMethod=m("form");this.primaryTechnology=m("");this.secondarySkills=m("e.g. JavaScript, Python, React, System Design");this.yearsOfExperience=m(2);this.interviewDuration=m(10);this.language=m("English");this.resumeText=m("");this.resumeFileName=m(null);this.isLoading=m(!1);this.error=m(null);this.currentUser=this.authService.currentUser;this.history=this.stateService.history}async onFileSelected(a){let e=a.target.files[0];if(e)if(this.resumeFileName.set(e.name),e.type==="text/plain"){let n=await e.text();this.resumeText.set(n)}else if(e.type==="application/pdf")try{this.isLoading.set(!0);let n=await this.extractTextFromPDF(e);this.resumeText.set(n)}catch(n){this.error.set("Failed to parse PDF: "+n.message),this.resumeFileName.set(null)}finally{this.isLoading.set(!1)}else this.error.set("Only .txt and .pdf are currently supported for parsing. Please convert your resume to PDF."),this.resumeFileName.set(null)}async extractTextFromPDF(a){let e=await a.arrayBuffer(),n=await import("./chunk-2C2LIJ2N.js");n.GlobalWorkerOptions.workerSrc=`https://cdn.jsdelivr.net/npm/pdfjs-dist@${n.version}/build/pdf.worker.min.mjs`;let s=await n.getDocument({data:e}).promise,d="";for(let C=1;C<=s.numPages;C++){let q=(await(await s.getPage(C)).getTextContent()).items.map(z=>z.str).join(" ");d+=q+`
`}return d}startInterview(){this.isLoading.set(!0),this.error.set(null);let a=this.authService.currentUser();if(!a){this.router.navigate(["/login"]);return}let e={primaryTechnology:this.primaryTechnology(),secondarySkills:this.secondarySkills(),yearsOfExperience:this.yearsOfExperience(),interviewDuration:this.interviewDuration(),language:this.language(),resumeText:this.setupMethod()==="resume"?this.resumeText():void 0},n={id:crypto.randomUUID(),userId:a.id,date:new Date().toISOString(),config:e,chatHistory:[],evaluatedQuestions:[],startTime:Date.now()};this.stateService.startInterview(n),this.router.navigate(["/interview"])}logout(){this.authService.logout(),this.router.navigate(["/"])}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=D({type:l,selectors:[["app-setup"]],decls:51,vars:16,consts:[[1,"max-w-7xl","mx-auto","p-6","md:p-8"],[1,"flex","flex-col","md:flex-row","justify-between","items-center","mb-12","animate-fade-in"],[1,"text-4xl","font-bold","text-white","mb-2"],[1,"text-slate-400"],[1,"mt-4","md:mt-0"],[1,"text-slate-400","hover:text-white","transition-colors",3,"click"],[1,"fas","fa-sign-out-alt","mr-2"],[1,"grid","grid-cols-1","lg:grid-cols-3","gap-8"],[1,"lg:col-span-1","space-y-8"],[1,"text-2xl","font-bold","text-white","mb-6","flex","items-center"],[1,"fas","fa-plus-circle","text-blue-500","mr-3"],[1,"glass","p-6","rounded-2xl","border","border-white/10","relative","overflow-hidden","group"],[1,"flex","bg-slate-900/50","rounded-lg","p-1","mb-6"],[1,"flex-1","py-2","rounded-md","text-xs","font-bold","uppercase","tracking-wider","text-slate-400","transition-colors",3,"click"],[1,"space-y-5","animate-fade-in"],[1,"space-y-4","animate-fade-in"],[1,"mt-6","space-y-4","border-t","border-white/5","pt-4"],[1,"block","text-xs","font-bold","text-slate-400","uppercase","mb-2"],[1,"grid","grid-cols-3","gap-2"],[1,"bg-slate-900/50","text-slate-300","text-xs","py-2","rounded","hover:bg-white/5","transition-colors",3,"bg-blue-600"],[1,"w-full","bg-slate-900/50","text-white","text-sm","rounded-lg","px-3","py-2","border","border-white/5","focus:outline-none",3,"ngModelChange","ngModel"],["value","English"],["value","Hindi"],["value","Hinglish"],[1,"mt-8"],[1,"text-xs","text-red-400","mb-2","text-center"],[1,"w-full","bg-gradient-to-r","from-blue-600","to-purple-600","hover:from-blue-500","hover:to-purple-500","text-white","font-bold","py-3","rounded-xl","shadow-lg","shadow-blue-900/20","transition-all","transform","hover:scale-[1.02]",3,"click","disabled"],[1,"lg:col-span-2","space-y-8"],[1,"fas","fa-history","text-purple-500","mr-3"],[1,"grid","gap-4"],[1,"glass","p-12","rounded-2xl","border","border-white/5","text-center","flex","flex-col","items-center","justify-center","h-64"],[1,"flex","items-center","justify-between","text-white","font-mono","text-sm","mb-2"],["type","range","min","0","max","15",1,"w-full","h-1","bg-slate-700","rounded-lg","appearance-none","cursor-pointer",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g. Frontend Developer, Java, Python",1,"w-full","bg-slate-900/50","border","border-white/5","rounded-lg","px-3","py-2","text-sm","text-white","focus:outline-none","focus:border-blue-500/50","mb-4",3,"ngModelChange","ngModel"],["type","text",1,"w-full","bg-slate-900/50","border","border-white/5","rounded-lg","px-3","py-2","text-sm","text-white","focus:outline-none","focus:border-blue-500/50",3,"ngModelChange","ngModel"],[1,"block","w-full","h-32","border-2","border-dashed","border-slate-600","rounded-xl","flex","flex-col","items-center","justify-center","cursor-pointer","hover:border-blue-500/50","transition-colors"],[1,"fas","fa-cloud-upload-alt","text-2xl","text-slate-400","mb-2"],[1,"text-xs","text-slate-500"],["type","file","accept",".pdf",1,"hidden",3,"change"],[1,"flex","items-center","text-xs","text-blue-400","bg-blue-500/10","p-2","rounded"],[1,"fas","fa-check","mr-2"],[1,"bg-slate-900/50","text-slate-300","text-xs","py-2","rounded","hover:bg-white/5","transition-colors",3,"click"],[1,"glass-card","p-5","rounded-xl","border","border-white/5","hover:border-white/10","transition-all","flex","flex-col","md:flex-row","items-center","gap-6"],[1,"relative","w-16","h-16","flex-shrink-0"],[1,"w-full","h-full","transform","-rotate-90"],["cx","32","cy","32","r","28","stroke","currentColor","stroke-width","4","fill","transparent",1,"text-slate-700"],["cx","32","cy","32","r","28","stroke","currentColor","stroke-width","4","fill","transparent"],[1,"absolute","inset-0","flex","items-center","justify-center","font-bold","text-sm","text-white"],[1,"flex-grow","text-center","md:text-left"],[1,"flex","items-center","justify-center","md:justify-start","gap-2","mb-1"],[1,"font-bold","text-white","text-lg"],[1,"text-xs","px-2","py-0.5","rounded-full","bg-slate-700","text-slate-300","border","border-white/10"],[1,"text-sm","text-slate-400","line-clamp-2"],[1,"text-xs","text-slate-500","mt-2"],[1,"w-16","h-16","bg-slate-800","rounded-full","flex","items-center","justify-center","mb-4"],[1,"fas","fa-history","text-2xl","text-slate-600"],[1,"text-lg","font-medium","text-white","mb-2"],[1,"text-slate-400","max-w-sm"]],template:function(e,n){if(e&1&&(t(0,"div",0)(1,"header",1)(2,"div")(3,"h1",2),r(4),i(),t(5,"p",3),r(6,"Ready for your next interview?"),i()(),t(7,"div",4)(8,"button",5),u("click",function(){return n.logout()}),x(9,"i",6),r(10," Logout "),i()()(),t(11,"div",7)(12,"div",8)(13,"h2",9),x(14,"i",10),r(15," New Interview "),i(),t(16,"div",11)(17,"div",12)(18,"button",13),u("click",function(){return n.setupMethod.set("form")}),r(19," Config "),i(),t(20,"button",13),u("click",function(){return n.setupMethod.set("resume")}),r(21," Resume "),i()(),v(22,Z,16,4,"div",14)(23,te,7,1,"div",15),t(24,"div",16)(25,"div")(26,"label",17),r(27,"Duration"),i(),t(28,"div",18),E(29,ie,2,3,"button",19,F),i()(),t(31,"div")(32,"label",17),r(33,"Language"),i(),t(34,"select",20),u("ngModelChange",function(d){return n.language.set(d)}),t(35,"option",21),r(36,"English"),i(),t(37,"option",22),r(38,"Hindi"),i(),t(39,"option",23),r(40,"Hinglish"),i()()()(),t(41,"div",24),v(42,ne,2,1,"p",25),t(43,"button",26),u("click",function(){return n.startInterview()}),r(44),i()()()(),t(45,"div",27)(46,"h2",9),x(47,"i",28),r(48," Past Interviews "),i(),v(49,oe,3,0,"div",29)(50,le,7,0,"div",30),i()()()),e&2){let s;o(4),p("Hello, ",(s=n.currentUser())==null?null:s.name),o(14),_("bg-blue-600",n.setupMethod()==="form")("text-white",n.setupMethod()==="form"),o(2),_("bg-blue-600",n.setupMethod()==="resume")("text-white",n.setupMethod()==="resume"),o(2),b(n.setupMethod()==="form"?22:23),o(7),M(N(15,K)),o(5),h("ngModel",n.language()),o(8),b(n.error()?42:-1),o(),h("disabled",n.isLoading()),o(),p(" ",n.isLoading()?"Preparing...":"Start Interview"," "),o(5),b(n.history().length>0?49:50)}},dependencies:[O,Y,G,J,U,A,B,R,$,j],encapsulation:2,changeDetection:0})}};export{W as SetupComponent};
